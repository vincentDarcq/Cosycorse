<div class="component">
    <div class="p_1pourcent" fxLayout="row" fxLayoutGap="10px">
        <mat-form-field class="width_10pourcent pl_1pourcent">
            <input matInput type="text" name="nomSearch" [placeholder]="translate('ACTIVITES.FILTRES.TITRE')"
             [(ngModel)]="titreSearch">
        </mat-form-field>
        <mat-form-field class="width_10pourcent pl_1pourcent">
            <input matInput type="text" name="villeSearch" [placeholder]="translate('ACTIVITES.FILTRES.VILLE')"
             [(ngModel)]="villeSearch" [matAutocomplete]="villescomplete">
        </mat-form-field>
        <mat-autocomplete #villescomplete="matAutocomplete">
            <mat-option *ngFor="let ville of villes" [value]="ville">
              {{ ville }}
            </mat-option>
        </mat-autocomplete>
        <mat-radio-group [(ngModel)]="typeSearch" name="typeSearch" *ngFor="let type of activite_types">
            <mat-radio-button #radioButton [value]="type">{{ translate('ACTIVITES.TYPE.'+type) }}</mat-radio-button>
        </mat-radio-group>
        <button class="btn btn-light" (click)="actualiser()" translate>ACTIVITES.FILTRES.ACTUALISER</button>
        <button class="btn btn-light" (click)="effacerFiltres()" translate>ACTIVITES.FILTRES.EFFACER_FILTRES</button>
    </div>
    <div class="wrapper">
        <div class="activites" *ngIf="!filtre">
            <div class="m_2pourcent box" *ngFor="let a of activites; let i = index">
                <img *ngIf="a && a.images" [src]="serverImg + a.images[a.indexImage]"
                    alt="">
                <i class='fas fa-angle-right arrow-right'
                    (click)="selectArrow(i, a.indexImage, $event)"></i>
                <i class='fas fa-angle-left arrow-left'
                    (click)="selectLeftArrow(i, a.indexImage, $event)"></i>
                <i class="fas arrow" [ngClass]="{ 
                    'fa-angle-down' : a.animationState === 'false',
                    'fa-angle-up' : a.animationState === 'true'
                    }"
                    (click)="expandDescription(a.animationState, i)"></i>
                <div class="details" fxLayout="column">
                    <span><b>{{ translate('ACTIVITES.TYPE.'+a.type)}} | {{ a.ville }}</b></span>
                    <span>{{ a.titre }}</span>
                    <span>{{ a.duree }}</span>
                </div>
                <div [@slideInOut]="a.animationState">
                    {{ a.description }}
                </div>
            </div>
        </div>
        <div class="activites" *ngIf="filtre">
            <div class="m_2pourcent box" *ngFor="let a of activitesFiltered; let i = index">
                <img *ngIf="a && a.images" [src]="serverImg + a.images[a.indexImage]"
                    alt="">
                <i class='fas fa-angle-right arrow-right'
                    (click)="selectArrow(i, a.indexImage, $event)"></i>
                <i class='fas fa-angle-left arrow-left'
                    (click)="selectLeftArrow(i, a.indexImage, $event)"></i>
                <div class="details" fxLayout="column">
                    <span><b>{{ translate('ACTIVITES.TYPE.'+a.type)}} | {{ a.ville }}</b></span>
                    <span>{{ a.titre }}</span>
                    <span>{{ a.duree }}</span>
                </div>
            </div>
        </div>
        <div id="map" leaflet *ngIf="displayMap" (leafletMapReady)="onMapReady($event)" [leafletOptions]="mapOptions">
        </div>
    </div>
</div>