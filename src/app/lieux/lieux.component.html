<div class="component">
    <div class="p_1pourcent" fxLayout="row" fxLayoutGap="10px">
        <mat-form-field class="width_10pourcent pl_1pourcent">
            <input matInput type="text" name="nomSearch" placeholder="nom"
             [(ngModel)]="nomSearch">
        </mat-form-field>
        <mat-form-field class="width_10pourcent pl_1pourcent">
            <input matInput type="text" name="villeSearch" placeholder="ville"
             [(ngModel)]="villeSearch" [matAutocomplete]="villescomplete">
        </mat-form-field>
        <mat-autocomplete #villescomplete="matAutocomplete">
            <mat-option *ngFor="let ville of villes" [value]="ville">
              {{ ville }}
            </mat-option>
        </mat-autocomplete>
        <mat-radio-group [(ngModel)]="typeSearch" name="typeSearch" *ngFor="let type of lieu_types">
            <mat-radio-button #radioButton [value]="type">{{ type }}</mat-radio-button>
        </mat-radio-group>
        <button class="btn btn-light" (click)="actualiser()">Actualiser</button>
        <button class="btn btn-light" (click)="effacerFiltres()">Effacer les filtres</button>
    </div>
    <div class="grid">
        <div class="lieux" *ngIf="!filtre">
            <div class="margin relative" *ngFor="let lieu of lieux; let indexLieu = index">
                <img *ngIf="lieu && lieu.images" [src]="serverImg + lieu.images[lieu.indexImage]"
                        alt="">
                <p>{{ lieu.nom }}</p>
                <i class='fas fa-angle-right arrow-right'
                    (click)="selectArrow(lieux, indexLieu, lieu.indexImage, $event)"></i>
                <i class='fas fa-angle-left arrow-left'
                    (click)="selectLeftArrow(lieux, indexLieu, lieu.indexImage, $event)"></i>
                <i class="fas arrow" [ngClass]="{ 
                    'fa-angle-down' : lieu.animationState === 'false',
                    'fa-angle-up' : lieu.animationState === 'true'
                  }"
                    (click)="expandDescription(lieu.animationState, indexLieu)"></i>
                <div *ngIf="indexLieu%3 === 0" [@slideInOut]="{ value: lieu.animationState, params: { leftValue: 0}}">
                    {{ lieu.description }}
                </div>
                <div *ngIf="indexLieu%3 === 1" [@slideInOut]="{ value: lieu.animationState, params: { leftValue: -100}}">
                    {{ lieu.description }}
                </div>
                <div *ngIf="indexLieu%3 === 2" [@slideInOut]="{ value: lieu.animationState, params: { leftValue: -200}}">
                    {{ lieu.description }}
                </div>
            </div>
        </div>
        <div class="lieux" *ngIf="filtre">
            <div class="margin" *ngFor="let lieu of lieuxFiltered; let indexLogement = index">
                <img *ngIf="lieu && lieu.images" [src]="serverImg + lieu.images[lieu.indexImage]"
                        alt="">
                <p>{{ lieu.nom }}</p>
                <i class='fas fa-angle-right arrow-right'
                    (click)="selectArrow(lieux, indexLogement, lieu.indexImage, $event)"></i>
                <i class='fas fa-angle-left arrow-left'
                    (click)="selectLeftArrow(lieux, indexLogement, lieu.indexImage, $event)"></i>
            </div>
        </div>
        <div id="map" leaflet *ngIf="displayMap" (leafletMapReady)="onMapReady($event)" [leafletOptions]="mapOptions">
        </div>
    </div>
</div>